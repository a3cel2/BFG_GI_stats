{
    "collab_server" : "",
    "contents" : "################################################################\n################################################################\n################################################################\n########                                                ########\n########                                                ########\n########     Pipeline for update of BFG-GI data         ########\n########                                                ########\n########                                                ########\n########                                                ########\n################################################################\n################################################################\n################################################################\n\nthis.dir <- dirname(parent.frame(2)$ofile)\nsetwd(this.dir)\n\ndevtools::load_all('../packages/BfgGiStats')\ndevtools::document('../packages/BfgGiStats')\n\nsetwd('../data')\n\n#Read in genetic interaction data from two tables, using sum column from second table\ngi_data <-\n  read.table('table_s1.tsv', head = T, stringsAsFactors = F)\n#Remove count data from first table\ngi_data <- gi_data[,-grep('^C_',colnames(gi_data))]\n\n#Can change this to look at only one of the two technical replicates, analyzes the sum by default\ngi_data_2 <-\n  read.table('TableForAlbi_Cij_WithReplicates.txt', head = T, stringsAsFactors = F)\ngi_data <- cbind(gi_data,gi_data_2[,grep('^C_ij.*sum',colnames(gi_data_2))])\n\n\n#Used for various functions\nz_cols <-\n  grep('Class',\n       grep('^Z_GIS', colnames(gi_data), val = T),\n       invert = T,\n       val = T)\nz_cols <- which(colnames(gi_data) %in% z_cols)\n\ngi_data_old <- gi_data\n\n\n#Change genetic interactions and significance calls\ngi_data <- update_gis(gi_data,\n                      #These values are empirically determined and have to be\n                      #in the same order as in gi_data count columns\n                      g_wt_vec = c(12.62,\n                                   8.34,\n                                   8.44,\n                                   7.04,\n                                   7.7,\n                                   7.84,\n                                   7.5,\n                                   7.76,\n                                   6.94,\n                                   6.28))\n\n#Add FDR columns\ngi_data <- add_fdrs(gi_data)\n\n#Update calls based on FDR columns\ngi_data <- update_calls(gi_data,use_z = F,fdr_cutoff = 0.05)\n\n##Making several plots\nsetwd(this.dir)\nsetwd('../results')\nCairo::CairoPDF(file='gi_fdr_prec_vs_st_onge.pdf',width=4.5,height=4)\nprecision_vs_stonge(gi_data)\ndev.off()\n\nCairo::CairoPDF(file='auc_vs_st_onge_new.pdf',width=7.5,height=4)\npar(mfrow=c(1,2))\nst_onge_auc_plot(gi_data)\ndev.off()\n\nCairo::CairoPDF(file='auc_vs_st_onge_old.pdf',width=7.5,height=4)\npar(mfrow=c(1,2))\nst_onge_auc_plot(gi_data_old,old_data=T)\ndev.off()\n\nCairo::CairoPDF(file='st_onge_scatterplot.pdf',width=7.5,height=3.5)\npar(mfrow=c(1,2))\nst_onge_scatterplot(gi_data)\ndev.off()\n\n#Update the table\nsetwd(this.dir)\nsetwd('../data')\nwrite.table(gi_data,row.names=F,quote=F,sep='\\t',file='table_s1_new.tsv')\n",
    "created" : 1508179925260.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "883515273",
    "id" : "5B3E2FD7",
    "lastKnownWriteTime" : 1510602049,
    "last_content_update" : 1510602049992,
    "path" : "~/Dropbox/Roth Lab/projects/BFG_GI_stats/scripts/master.R",
    "project_path" : "scripts/master.R",
    "properties" : {
    },
    "relative_order" : 1,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}